!function(t,a,e){if("undefined"==typeof yith_wccl_general)return!1;var i=function(a,e,i){var o=!1,r=a.data("product_variations"),n=a.find(".variations select"),l=[];t.each(n,(function(){var a=t(this).data("attribute_name")||t(this).attr("name");l[a]=i==a?e:t(this).val()}));for(var c=0;c<r.length;c++){var s=r[c];if(o)break;for(var d in o=s,s.attributes)if(s.attributes.hasOwnProperty(d)){var _=s.attributes[d];_!=l[d]&&""!=_&&(o=!1)}}return o},o=function(i){i.preventDefault();var o=t(this),r=o.data("product_id"),n=o.data("quantity"),l=[],c={};t.each(o.data(),(function(t,a){c[t]=a})),i.data.select.each((function(t){l[t]=this.name+"="+this.value})),t(e.body).trigger("adding_to_cart",[o,c]),t.ajax({url:yith_wccl_general.ajaxurl.toString().replace("%%endpoint%%",yith_wccl_general.actionAddCart),type:"POST",data:{action:yith_wccl_general.actionAddCart,product_id:r,variation_id:i.data.variation,attr:l.join("&"),quantity:n,context:"frontend"},beforeSend:function(){o.addClass("loading").removeClass("added")},success:function(i){i.error&&i.product_url?a.location=i.product_url:yith_wccl_general.cart_redirect?a.location=yith_wccl_general.cart_url:(o.removeClass("loading").addClass("added"),o.next(".added_to_cart").length||o.after(' <a href="'+yith_wccl_general.cart_url+'" class="added_to_cart wc-forward" title="'+yith_wccl_general.view_cart+'">'+yith_wccl_general.view_cart+"</a>"),t(e.body).trigger("wc_fragment_refresh"),t(e).trigger("wc_update_cart"),t(e.body).trigger("added_to_cart",[i.fragments,i.cart_hash,o]))}})},r=function(t,a){a.closest("tr").find("th label").text(t)},n=function(t,a){this.$form=t,this.$attr="undefined"!=typeof yith_wccl?JSON.parse(yith_wccl.attributes):a,this.$select=this.$form.find(".variations select"),this.$use_ajax=!1===this.$form.data("product_variations"),this.$is_loop=this.$form.hasClass("in_loop"),this.$wrapper=this.$form.closest(yith_wccl_general.wrapper_container_shop).length?this.$form.closest(yith_wccl_general.wrapper_container_shop):this.$form.closest(".product-add-to-cart"),this.$image=this.$wrapper.find(yith_wccl_general.image_selector).first(),this.$def_image_src=this.$image.data("lazy-src")?this.$image.data("lazy-src"):this.$image.attr("src"),this.$def_image_srcset=this.$image.data("lazy-srcset")?this.$image.data("lazy-srcset"):this.$image.attr("srcset"),this.$price_html=this.$wrapper.find(yith_wccl_general.wrapper_price_shop).clone().wrap("<p>").parent().html(),this.$button=this.$wrapper.find("a.add_to_cart_button"),this.$button_html=this.$button.html(),this.$input_qty=this.$wrapper.find("input.thumbnail-quantity"),this.$xhr=null,this.variations_gallery=[],void 0===this.$attr&&(this.$attr=[]),t.on("yith_wccl_form_initialized",{obj:this},this.init),this.$select.each((function(){this.setAttribute("data-default_value",this.value)})),this.resetForm(this),this.$is_loop&&t.parent().on("change",(function(t){t.stopPropagation()})),this.$input_qty.length&&this.$input_qty.hide(),this.$form.hasClass("initialized")||this.$form.addClass("initialized").fadeIn().trigger("yith_wccl_form_initialized")};n.prototype.styleOption=function(a,e,i,o){switch(/^(ftp|http|https):\/\/[^ "]+$/.test(o)&&"image"!==i&&(i="image"),i){case"colorpicker":1==(o=o.split(",")).length?(e.append(t('<div class="yith_wccl_value_wrapper"><span class="yith_wccl_value"></span></div>')),e.find(".yith_wccl_value").css({background:o})):(e.append(t('<div class="yith_wccl_value_wrapper"><span class="yith_wccl_value"><span class="yith-wccl-bicolor"/></span></div>')),e.find(".yith-wccl-bicolor").css({"background-color":o[0],"border-color":o[1]}));break;case"image":e.append(t('<div class="yith_wccl_value_wrapper"><img class="yith_wccl_value"/></div>')),e.find(".yith_wccl_value").attr("src",o).attr("alt",i);break;case"label":e.append(t('<div class="yith_wccl_value_wrapper"><span class="yith_wccl_value"></span></div>')),e.find(".yith_wccl_value").text(o)}},n.prototype.addTooltip=function(a,e,i,o,r,n=""){var l=t('<span class="yith_wccl_tooltip"></span>'),c=yith_wccl_general.tooltip_pos+" "+yith_wccl_general.tooltip_ani;!yith_wccl_general.tooltip||void 0===e||!e&&""===n||i.find(".yith_wccl_tooltip").length||("image"==o&&(e=e.toString().replace("{show_image}",'<img src="'+r+'" />')),""!==n&&(color_image='<img src="'+n+'" />',e=color_image+e.toString()),l.addClass(c),i.append(l.html('<span class="yith-wccl-tooltip-image">'+e+"</span>")))},n.prototype.handleSelect=function(a){var e=a.data.obj,o={};e.$select.each((function(){var a=t(this);o[this.name]=a.val()})),e.$select.each((function(){var a,n=t(this),l=e.$attr[this.name],c=decodeURIComponent(this.name),s=n.parent().find(".select_box"),d=[],_=n.closest("tr").find("th label").data("default-label");(a=n.closest(".select-wrapper")).length||(a=n.closest("td")).length||(a=n.parent()),void 0===l&&(l=e.$attr[c]),!yith_wccl_general.description||e.$is_loop||e.$wrapper.length||e.$form.find(".description_"+c).length||void 0===l||!l.descr||(n.closest("tr").length?n.closest("tr").after('<tr class="description_'+c+'"><td colspan="2">'+l.descr+"</td></tr>"):a.append('<p class="description_'+c+'">'+l.descr+"</p>"));var h=void 0!==l?l.type:n.data("type"),p=void 0!==l&&l.terms;if(a.addClass("yith_wccl_layout_"+yith_wccl_general.variation_layout),a.siblings(".label").addClass("yith_wccl_layout_"+yith_wccl_general.variation_layout),(e.$is_loop||void 0!==l&&l.terms)&&void 0!==h&&h){n.addClass("yith_wccl_custom").hide(),a.addClass("yith_wccl_is_custom"),s.length&&yith_wccl_general.grey_out||(s.remove(),s=t("<div />",{class:"select_box_"+h+" select_box "+n.attr("name")}).insertAfter(n)),n.find("option").each((function(){var a=t(this).val();if(p&&void 0!==p[a]||void 0!==t(this).data("value")&&""!==t(this).data("value")){d.push(a);var o=t(this),l="select_option_"+h+" select_option",f=p&&void 0!==p[a]?p[a].value:t(this).data("value"),g=p&&void 0!==p[a]?p[a].tooltip:t(this).data("tooltip"),u=p&&void 0!==p[a]?p[a].tooltip_image:t(this).data("tooltip_image"),m=s.find('[data-value="'+a+'"]'),v=p&&void 0!==p[a]?p[a].type:t(this).data("type");h=v||h,m.length||(a!=n.val()&&a!=n.attr("data-default_value")||(l+=" selected",yith_wccl_general.change_label_on_selected_attribute&&void 0!==_&&r(_+yith_wccl_general.attribute_separator+o[0].label,n)),(m=t("<div/>",{class:l,"data-value":a,"data-label":o[0].label,"data-tooltip_image":u,"data-attr_name":c}).appendTo(s)).off("click").on("click",(function(a){var l=t(this).hasClass("inactive"),c=t(this).hasClass("selected");if(l){var s=n.data("attribute_name")||n.attr("name");i(e.$form,t(this).data("value"),s)&&n.val("").change()}if(c)n.val("").change(),yith_wccl_general.change_label_on_selected_attribute&&r(_,n);else{n.val(o.val()).change();var d=t(this).data("label");yith_wccl_general.change_label_on_selected_attribute&&r(_+yith_wccl_general.attribute_separator+d,n)}t(this).toggleClass("selected"),t(this).siblings().removeClass("selected")})),e.styleOption(e,m,h,f),e.addTooltip(e,g,m,h,f,u))}}));var f=e.$form.data("product_variations");s.children().each((function(){var a=t(this).data("value")+"",i=t(this).closest(".yith_wccl_is_custom").find("select.yith_wccl_custom").attr("name");let r=Object.assign({},o);if("-1"==t.inArray(a,d)?t(this).addClass("yith-wccl-remove"):t(this).removeClass("yith-wccl-remove"),!e.$use_ajax)if(r[i]=a,!!e.findMatchingVariations(f,r).find((t=>!0===t.is_in_stock)))switch(t(this).removeClass("inactive"),yith_wccl_general.attribute_style){case"blur_cross":t(this).removeClass("inactive_cross");break;case"hide":t(this).removeClass("yith-wccl-remove")}else switch(t(this).addClass("inactive"),yith_wccl_general.attribute_style){case"blur_cross":t(this).addClass("inactive_cross");break;case"hide":t(this).addClass("yith-wccl-remove")}})),e.$form.trigger("yith_wccl_select_initialized",[n,l])}else n.on("change",(function(a){var e=t(this).closest("tr").find("th label").data("default-label"),i=t(this).val();i&&(e=e+yith_wccl_general.attribute_separator+i),yith_wccl_general.change_label_on_selected_attribute&&r(e,t(this))}))}))},n.prototype.setDefaultValue=function(a){var e=a.data.obj;e.$select.each((function(){t(this).val(t(this).attr("data-default_value"))})),e.$select.first().change()},n.prototype.changeLoopImage=function(t,a){if(a){var e=void 0!==a.image&&a.image.thumb_src?a.image.thumb_src:"",i=void 0!==a.image&&a.image.srcset?a.image.srcset:"";e&&e.length&&(t.$image.attr("src",e),t.$image.attr("data-lazy-src",e)),yith_wccl_general.set_srcset_on_loop_image&&i&&i.length&&t.$def_image_srcset&&(t.$image.attr("srcset",i),t.$image.attr("data-lazy-srcset",i))}else t.$image.attr("src",t.$def_image_src),t.$def_image_srcset&&t.$image.attr("srcset",t.$def_image_srcset)},n.prototype.changeSingleImage=function(t,a){var e=t.$form.closest(".product").find(".images").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),i=e.find(".wp-post-image"),o=e.find("a").eq(0);i.wc_set_variation_attr("src",a.image.src),i.wc_set_variation_attr("height",a.image.src_h),i.wc_set_variation_attr("width",a.image.src_w),i.wc_set_variation_attr("srcset",a.image.srcset),i.wc_set_variation_attr("sizes",a.image.sizes),i.wc_set_variation_attr("title",a.image.title),i.wc_set_variation_attr("alt",a.image.alt),i.wc_set_variation_attr("data-src",a.image.full_src),i.wc_set_variation_attr("data-large_image",a.image.full_src),i.wc_set_variation_attr("data-large_image_width",a.image.full_src_w),i.wc_set_variation_attr("data-large_image_height",a.image.full_src_h),e.wc_set_variation_attr("data-thumb",a.image.src),o.wc_set_variation_attr("href",a.image.full_src)},n.prototype.changeImageOnHover=function(a){var e=a.data.obj;1==e.$select.length&&yith_wccl_general.image_hover&&e.$form.on("mouseenter",".select_option",(function(){var a=t(this).attr("data-value"),o=e.$select.attr("name"),r=i(e.$form,a,o);(yith_wccl_general.image_hover_even_selected||!t(this).hasClass("selected")&&!t(this).siblings().hasClass("selected"))&&r&&(r.image&&r.image.src||r.image_src)&&(e.$form.hasClass("in_loop")?e.changeLoopImage(e,r):e.changeSingleImage(e,r))})).on("mouseleave",".select_option",(function(){t(this).hasClass("selected")||t(this).siblings().hasClass("selected")||(e.$form.hasClass("in_loop")?e.changeLoopImage(e,!1):e.$form.wc_variations_image_update(!1))}))},n.prototype.handleCheckVariations=function(t,a,e){var i=t.data.obj;if(!e){if(i.$found&&(t.data.obj.$found=!1,!i.$use_ajax))return;i.$changed&&(t.data.obj.$changed=!1,i.resetLoopForm(i))}},n.prototype.handleFoundVariation=function(a,i){var r=a.data.obj;r.$use_ajax?r.handleSelect(a):r.$select.last().trigger("focusin"),r.$is_loop&&(r.$changed&&r.resetLoopForm(r),a.data.obj.$changed=!0,a.data.obj.$found=!0,r.changeLoopImage(r,i),i.is_purchasable&&(i.price_html&&r.$wrapper.find(yith_wccl_general.wrapper_price_shop).replaceWith(i.price_html),r.$input_qty.length&&r.$input_qty.show(),i.is_in_stock&&(r.$button.html(yith_wccl_general.add_cart),r.$button.off("click").on("click",{variation:i.variation_id,select:r.$select},o))),r.$wrapper.find(".variations_form").after(t(i.availability_html).addClass("ywccl_stock")),r.$form.data("active_variation",i.variation_id),t(e).trigger("ywccl_found_variation_in_loop",[i,r.$button,yith_wccl_general.add_cart]))},n.prototype.handleVariationGallery=function(a,e){var i,o=a.data.obj,r=t(yith_wccl_general.single_gallery_selector);!o.$is_loop&&r.length&&(null!==o.$xhr&&o.$xhr.abort(),(i=void 0!==e?e.variation_id:o.$form.find('input[name="product_id"]').val())&&void 0!==i&&(void 0!==o.variations_gallery[i]?o.loadVariationGallery(o.variations_gallery[i],r,e):o.$xhr=t.ajax({url:yith_wccl_general.ajaxurl.toString().replace("%%endpoint%%",yith_wccl_general.actionVariationGallery),data:{action:yith_wccl_general.actionVariationGallery,id:i,context:"frontend"},type:"POST",dataType:"html",beforeSend:function(){r.addClass("loading-gallery")},success:function(t){r.removeClass("loading-gallery"),o.$xhr=null,t&&(o.variations_gallery[i]=t,o.loadVariationGallery(t,r,e)),"function"==typeof initAvadaWoocommerProductGallery&&initAvadaWoocommerProductGallery()}})))},n.prototype.loadVariationGallery=function(a,i,o){i.replaceWith(a).fadeIn(),"undefined"!=typeof wc_single_product_params&&t(yith_wccl_general.single_gallery_selector).wc_product_gallery(wc_single_product_params),this.$form.wc_variations_image_update(o),t(e).trigger("yith_wccl_product_gallery_loaded"),t(e).trigger("uncode-quick-view-loaded"),t(e).trigger("wdReplaceMainGallery"),t(e).trigger("wdResetVariation"),"undefined"!=typeof woodmartThemeModule&&woodmartThemeModule.productImages()},n.prototype.resetLoopForm=function(a){a.changeLoopImage(a,!1),a.$wrapper.find(yith_wccl_general.wrapper_price_shop).replaceWith(a.$price_html),a.$wrapper.find(".ywccl_stock").remove(),a.$input_qty.length&&a.$input_qty.hide(),a.$button.html(a.$button_html).off("click",o).removeClass("added").next(".added_to_cart").remove(),a.$form.data("active_variation",""),t(e).trigger("yith_wccl_reset_loop_form",[a.$button])},n.prototype.resetForm=function(t){t.$form.find("div.select_option").removeClass("selected inactive"),t.$select.val("").change(),t.$form.trigger("reset_data")},n.prototype.onReset=function(t){t.data.obj.$form.find(".select_option.selected").removeClass("selected inactive")},n.prototype.onAddToCart=function(a){t(this).is(".wc-variation-selection-needed")&&a.data.obj.$select.each((function(){t(this).closest("tr").find("th").removeClass("yith-wccl-no-selected"),t(this).val()||t(this).closest("tr").find("th").addClass("yith-wccl-no-selected")}))},n.prototype.findMatchingVariations=function(t,a){for(var e=[],i=0;i<t.length;i++){var o=t[i];this.isMatch(o.attributes,a)&&e.push(o)}return e},n.prototype.isMatch=function(t,a){var e=!0;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i],r=a[i];void 0!==o&&void 0!==r&&"string"==typeof r&&0!==o.length&&0!==r.length&&o!==r&&(e=!1)}return e},n.prototype.getChosenAttributes=function(a){var e={},i=0,o=0;if(!a.$use_ajax)return this.$select.each((function(){var a=t(this).data("attribute_name")||t(this).attr("name"),r=t(this).val()||"";r.length>0&&o++,i++,e[a]=r})),{count:i,chosenCount:o,data:e}},n.prototype.onUpdateAttributes=function(a){var e=a.data.obj;if(!e.$use_ajax){var i=e.getChosenAttributes(e).data;e.$select.each((function(o,r){var n,l=t(r),c=l.data("attribute_name")||l.attr("name"),s=t(r).data("show_option_none"),d=":gt(0)",_=t("<select/>"),h=l.val()||"",p=!0;if(!l.data("attribute_html")){var f=l.clone();f.find("option").removeAttr("attached").prop("disabled",!1).prop("selected",!1),l.data("attribute_options",f.find("option"+d).get()),l.data("attribute_html",f.html())}_.html(l.data("attribute_html"));var g=t.extend(!0,{},i);g[c]="";var u=e.findMatchingVariations(a.data.obj.$form.data("product_variations"),g);for(var m in u)if(void 0!==u[m]){var v=u[m].attributes;for(var y in v)if(v.hasOwnProperty(y)){var w=v[y],$="";if(y===c)if(u[m].variation_is_active&&($="enabled"),w){w=t("<div/>").html(w).text();var b=_.find("option");if(b.length)for(var C=0,j=b.length;C<j;C++){var k=t(b[C]);if(w===k.val()){k.addClass("attached "+$);break}}}else _.find("option:gt(0)").addClass("attached "+$)}}n=_.find("option.attached").length,h&&(p=!1,0!==n&&_.find("option.attached.enabled").each((function(){var a=t(this).val();if(h===a)return p=!0,!1}))),n>0&&h&&p&&"no"===s&&(_.find("option:first").remove(),d=""),_.find("option"+d+":not(.attached)").remove(),l.html(_.html()),l.find("option"+d+":not(.enabled)").prop("disabled",!0),h?p?l.val(h):l.val("").trigger("change"):l.val("")})),e.$form.trigger("woocommerce_update_variation_values")}},n.prototype.init=function(a){var e=a.data.obj;e.$form.on("click.wc-variation-form",".reset_variations",{obj:e},e.onReset),e.$form.on("woocommerce_update_variation_values",{obj:e},e.handleSelect),e.$form.one("yith_wccl_select_initialized",{obj:e},e.changeImageOnHover),e.$form.on("check_variations",{obj:e},e.handleCheckVariations),e.$form.on("found_variation",{obj:e},e.handleFoundVariation),yith_wccl_general.enable_handle_variation_gallery&&(e.$form.on("found_variation",{obj:e},e.handleVariationGallery),e.$form.on("reset_image",{obj:e},e.handleVariationGallery)),e.$form.on("click",".single_add_to_cart_button",{obj:e},e.onAddToCart),e.$select.each((function(){if(!t(this).parents(".bundled_product").length){var a=t(this).attr("data-default_value");t(this).removeAttr("data-default_value"),t(this).val(a),t(this).closest("tr").find("th label").attr("data-default-label",t(this).closest("tr").find("th label").text())}})),e.$form.on("update_variation_values.wc-variation-form",{obj:e},e.onUpdateAttributes),e.handleSelect(a)},t.yith_wccl=function(a){forms=t(".variations_form.cart:not(.initialized), .owl-item.cloned .variations_form, form.cart.ywcp_form_loaded"),void 0===a&&(a=[]),forms.each((function(){new n(t(this),a)}))},t(e).on(yith_wccl_general.plugin_compatibility_selectors,(function(){void 0!==t.yith_wccl&&void 0!==t.fn.wc_variation_form&&(t(e).find(".variations_form:not(.initialized), .owl-item.cloned .variations_form").each((function(){t(this).wc_variation_form()})),"undefined"==typeof attr&&(attr=[]),t.yith_wccl(attr))})),t(a).on("astWooCommerceAjaxPostsAdded facetwp-loaded",(function(){void 0!==t.yith_wccl&&void 0!==t.fn.wc_variation_form&&(t(e).find(".variations_form:not(.initialized)").each((function(){t(this).wc_variation_form()})),t.yith_wccl([]))})),t("body").on("quick-view-displayed",(function(){var a=t(".pp_woocommerce_quick_view").find(".yith-wccl-data").data("attr");a&&t.yith_wccl(a)})),t(".shop-container > .products").on("append.infiniteScroll",(function(){t(e).find(".variations_form:not(.initialized), .owl-item.cloned .variations_form").each((function(){t(this).wc_variation_form()})),"undefined"==typeof attr&&(attr=[]),t.yith_wccl(attr)})),t(e).on("yith_wccl_product_gallery_loaded",(function(){if("undefined"!=typeof mkdf&&"function"==typeof mkdf.modules.common.mkdfPrettyPhoto){var a=t(".mkdf-woo-single-page.mkdf-woo-single-has-pretty-photo .images .woocommerce-product-gallery__image");a.length&&(a.children("a").attr("data-rel","prettyPhoto[woo_single_pretty_photo]"),mkdf.modules.common.mkdfPrettyPhoto())}"undefined"!=typeof Flatsome&&(Flatsome.attach(t(".product-gallery")),t(".zoom-button").click((function(a){a.preventDefault(),t(".product-gallery-slider").find(".is-selected a").click()})))})),t(e).ready((function(){t.yith_wccl()}))}(jQuery,window,document);